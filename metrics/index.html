<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-metrics" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.5.2">
<title data-rh="true">Metrics Overview | AutoEval</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.lastmileai.dev/metrics"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Metrics Overview | AutoEval"><meta data-rh="true" name="description" content="Evaluation Metrics are the key to unlocking development velocity and safety in productionizing LLM applications. Metrics measure the performance of your LLM (or Retrieval Augmented Generation - RAG) applications. LastMile AI&#x27;s metrics include hallucination detection, summarization, relevance, q/a, semantic similarity, exact match, bleu, rouge, and toxicity."><meta data-rh="true" property="og:description" content="Evaluation Metrics are the key to unlocking development velocity and safety in productionizing LLM applications. Metrics measure the performance of your LLM (or Retrieval Augmented Generation - RAG) applications. LastMile AI&#x27;s metrics include hallucination detection, summarization, relevance, q/a, semantic similarity, exact match, bleu, rouge, and toxicity."><link data-rh="true" rel="icon" href="/img/lm_favicon.png"><link data-rh="true" rel="canonical" href="https://docs.lastmileai.dev/metrics"><link data-rh="true" rel="alternate" href="https://docs.lastmileai.dev/metrics" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.lastmileai.dev/metrics" hreflang="x-default"><link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-7WTWGRSSS8"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-7WTWGRSSS8",{})</script><link rel="stylesheet" href="/assets/css/styles.6087c6a6.css">
<script src="/assets/js/runtime~main.a134fe85.js" defer="defer"></script>
<script src="/assets/js/main.5ed15e58.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,t("light"))}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><a class="navbar__brand" href="/"></a></div><div class="navbar__items navbar__items--right"><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">LastMile AI</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/app_home">app_home</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/overview">Evaluation and Guardrails Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/quickstart">Quickstart</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/models">Models</a><button aria-label="Collapse sidebar category &#x27;Models&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/alberta">AlBERTa</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/alberta-8k">AlBERTa-LC-8k</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/platform">AutoEval Platform</a><button aria-label="Collapse sidebar category &#x27;AutoEval Platform&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/data-generation">Synthetic Data Generation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/fine-tuning">Fine-tuning AlBERTa</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/active-learning">Active Learning</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/metrics">Metrics Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/deployment">Deployment Options</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a href="https://github.com/lastmile-ai/eval-cookbook" target="_blank" rel="noopener noreferrer" class="menu__link menuExternalLink_NmtK">Cookbook<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/sdk">AutoEval Python SDK</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/workbooks">AI Workbooks</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a href="https://aiconfig.lastmileai.dev/docs/basics" target="_blank" rel="noopener noreferrer" class="menu__link menuExternalLink_NmtK">AIConfig<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/category/api-specs">API Specs</a><button aria-label="Expand sidebar category &#x27;API Specs&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_xLCN"><div class="docItemContainer_jfFK"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Metrics Overview</span><meta itemprop="position" content="1"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><div class="row"><div class="col col--12 markdown"><header><h1>Metrics Overview</h1></header>
<p>Evaluation Metrics are the key to unlocking development velocity and safety in productionizing LLM applications. Metrics measure the performance of your LLM (or Retrieval Augmented Generation - RAG) applications. LastMile AI&#x27;s metrics include <code>hallucination detection</code>, <code>summarization</code>, <code>relevance</code>, <code>q/a</code>, <code>semantic similarity</code>, <code>exact match</code>, <code>bleu</code>, <code>rouge</code>, and <code>toxicity</code>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="hallucination-detection-faithfulness">Hallucination Detection (Faithfulness)<a href="#hallucination-detection-faithfulness" class="hash-link" aria-label="Direct link to Hallucination Detection (Faithfulness)" title="Direct link to Hallucination Detection (Faithfulness)">​</a></h3>
<p>A specialized LastMile evaluator that measures the faithfulness of an LLM-generated response to the provided context in a RAG system. It aims to detect hallucination, which occurs when LLMs generate unsupported information despite being given context in the prompt. The pscore answers: <em>“To what extent is the generated answer faithful to the provided context without introducing unsupported information?”</em></p>
<p>Inputs:</p>
<ul>
<li>User&#x27;s question: The input query to the RAG application.</li>
<li>Retrieved context: The context or information retrieved from a vector DB based on the user question</li>
<li>LLM-generated response: The output produced by the LLM using the retrieved context.</li>
</ul>
<p>The hallucination detection evaluator outputs a score ranging from 0 to 1. Higher scores indicating that the response is more faithful to the context. Lower scores suggest that the model might have included information not present in the context. <a href="https://blog.lastmileai.dev/harder-better-faster-stronger-llm-hallucination-detection-for-real-world-rag-part-i-949248f0ad94" target="_blank" rel="noopener noreferrer">Learn more</a>.</p>
<p><strong>Example Code Snippet</strong></p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#FFFFFF;--prism-background-color:#282C34"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#FFFFFF;background-color:#282C34"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#FFFFFF"><span class="token comment" style="color:#93a1a1"># To be updated with updated code snippet</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">user_query </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token string" style="color:#8dc891">&quot;What is Albert Einstein famous for?&quot;</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">context_retrieved </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token triple-quoted-string string" style="color:#8dc891">&quot;&quot;&quot;Albert Einstein was a German-born theoretical physicist who developed</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token triple-quoted-string string" style="color:#8dc891">    the theory of relativity, one of the two pillars of modern physics. His </span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token triple-quoted-string string" style="color:#8dc891">    work is also known for its influence on the philosophy of science. He is </span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token triple-quoted-string string" style="color:#8dc891">    best known to the general public for his mass-energy equivalence formula </span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token triple-quoted-string string" style="color:#8dc891">    E = mc², which has been dubbed &#x27;the world&#x27;s most famous equation&#x27;. He </span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token triple-quoted-string string" style="color:#8dc891">    received the 1921 Nobel Prize in Physics &#x27;for his services to theoretical</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token triple-quoted-string string" style="color:#8dc891">    physics, and especially for his discovery of the law of the photoelectric </span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token triple-quoted-string string" style="color:#8dc891">    effect&#x27;, a pivotal step in the development of quantum theory.&quot;&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">llm_generated_response </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token string" style="color:#8dc891">&quot;Albert Einstein is famous for the formula E = mc² and Brownian motion.&quot;</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># Calculate faithful</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">faithful_result </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> get_rag_eval_scores</span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    user_query</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    context_retrieved</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    llm_generated_response</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    api_token</span><span class="token operator" style="color:#fc929e">=</span><span class="token plain">os</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain">getenv</span><span class="token punctuation" style="color:#657b83">(</span><span class="token string" style="color:#8dc891">&quot;LASTMILE_API_TOKEN&quot;</span><span class="token punctuation" style="color:#657b83">)</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># Print results</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">display</span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain">pd</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain">DataFrame</span><span class="token punctuation" style="color:#657b83">(</span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token string" style="color:#8dc891">&quot;LLM Generated Response&quot;</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> llm_generated_response</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token string" style="color:#8dc891">&quot;Context Retrieved&quot;</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> context_retrieved</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token string" style="color:#8dc891">&quot;User Query&quot;</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> user_query</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token string" style="color:#8dc891">&quot;Faithfulness&quot;</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> faithful_result</span><span class="token punctuation" style="color:#657b83">[</span><span class="token string" style="color:#8dc891">&#x27;p_faithful&#x27;</span><span class="token punctuation" style="color:#657b83">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">}</span><span class="token punctuation" style="color:#657b83">)</span><span class="token punctuation" style="color:#657b83">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<img width="1000" alt="faithful" src="https://github.com/lastmile-ai/aiconfig/assets/81494782/912eecca-fcd2-41e9-871b-09a36a5f1258">
<p>The faithfulness score of 0.66 suggests that the LLM-generated response is only partially faithful to the retrieved context. While it correctly mentions Einstein&#x27;s famous equation, E = mc², it also includes information about Brownian motion, which is not present in the context. The inclusion of this additional information likely contributed to the lower score, indicating that the LLM relied on its own knowledge beyond the given context.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="summarization">Summarization<a href="#summarization" class="hash-link" aria-label="Direct link to Summarization" title="Direct link to Summarization">​</a></h3>
<p>The Summarization evaluator measures the quality of an LLM-generated summary compared to the source document. It aims to assess how well the summary captures the essential information and main ideas of the source document. The summarization score answers: <em>&quot;To what extent does the generated summary capture the essential information from the source document?&quot;</em></p>
<p>Inputs:</p>
<ul>
<li>Source document: The full text that is being summarized.</li>
<li>LLM-generated summary: The summary produced by the LLM based on the source document.</li>
</ul>
<p>The Summarization evaluator outputs a score ranging from 0 to 1. Higher scores indicate that the summary more effectively captures the essential information from the source document. Lower scores suggest that the summary may be missing key points or including irrelevant information.</p>
<p><strong>Example Code Snippet</strong></p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#FFFFFF;--prism-background-color:#282C34"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#FFFFFF;background-color:#282C34"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#FFFFFF"><span class="token plain">source_document </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token triple-quoted-string string" style="color:#8dc891">&quot;&quot;&quot;Albert Einstein was a German-born theoretical physicist who developed </span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token triple-quoted-string string" style="color:#8dc891">    the theory of relativity, one of the two pillars of modern physics. His work</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token triple-quoted-string string" style="color:#8dc891">    is also known for its influence on the philosophy of science. He is best known</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token triple-quoted-string string" style="color:#8dc891">    to the general public for his mass-energy equivalence formula E = mc², </span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token triple-quoted-string string" style="color:#8dc891">    which has been dubbed &#x27;the world&#x27;s most famous equation&#x27;. Einstein received </span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token triple-quoted-string string" style="color:#8dc891">    the 1921 Nobel Prize in Physics &#x27;for his services to theoretical physics, and</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token triple-quoted-string string" style="color:#8dc891">    especially for his discovery of the law of the photoelectric effect&#x27;, a </span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token triple-quoted-string string" style="color:#8dc891">    pivotal step in the development of quantum theory. In his later years, </span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token triple-quoted-string string" style="color:#8dc891">    Einstein focused on unified field theory and became increasingly isolated </span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token triple-quoted-string string" style="color:#8dc891">    from the mainstream of   modern physics.&quot;&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">llm_generated_summary </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token triple-quoted-string string" style="color:#8dc891">&quot;&quot;&quot;Albert Einstein, a German-born physicist, developed the theory of </span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token triple-quoted-string string" style="color:#8dc891">    relativity and the famous equation E = mc². He won the 1921 Nobel Prize </span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token triple-quoted-string string" style="color:#8dc891">    in Physics for his work on the photoelectric effect, contributing to </span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token triple-quoted-string string" style="color:#8dc891">    quantum theory. Later, he worked on unified field theory.&quot;&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># Calculate Summarization Score</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">summarization_score </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> lm_eval_text</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain">calculate_summarization_score</span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    llm_generated_summary</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    source_document</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    model_name</span><span class="token operator" style="color:#fc929e">=</span><span class="token string" style="color:#8dc891">&quot;gpt-3.5-turbo&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># Print results</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">display</span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain">pd</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain">DataFrame</span><span class="token punctuation" style="color:#657b83">(</span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token string" style="color:#8dc891">&quot;Source Document&quot;</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> source_document</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token string" style="color:#8dc891">&quot;LLM Generated Summary&quot;</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> llm_generated_summary</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token string" style="color:#8dc891">&quot;Summarization Score&quot;</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> summarization_score</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">}</span><span class="token punctuation" style="color:#657b83">)</span><span class="token punctuation" style="color:#657b83">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<img width="1000" alt="summarization" src="https://github.com/lastmile-ai/aiconfig/assets/81494782/57bf8fe1-8d47-43f4-b175-91e7bf338056">
<p>The summarization score of 0.88 indicates the summary effectively captures key points about Einstein, including his German origin, development of relativity theory, E = mc² equation, 1921 Nobel Prize for the photoelectric effect, and work on unified field theory. It successfully condenses essential information while maintaining accuracy. The score isn&#x27;t perfect, likely due to omitting Einstein&#x27;s influence on philosophy of science and his later isolation from mainstream physics.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="relevance">Relevance<a href="#relevance" class="hash-link" aria-label="Direct link to Relevance" title="Direct link to Relevance">​</a></h3>
<p>The Relevance evaluator measures how well an LLM-generated response aligns with an expected output (ground truth). It aims to assess the topical relevance and contextual alignment of the generated response. The relevance score answers: <em>&quot;To what extent does the generated response align with the topic and content of the expected output?&quot;</em></p>
<p>Inputs:</p>
<ul>
<li>LLM-generated response: The response produced by the LLM.</li>
<li>Expected output (ground truth): The ideal or correct response to compare against.</li>
</ul>
<p>The Relevance Score evaluator outputs a score ranging from 0 to 1. Higher scores indicate that the LLM-generated response is more relevant and aligned with the expected output. Lower scores suggest that the response may be off-topic or misaligned with the desired content.</p>
<p><strong>Example Code Snippet</strong></p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#FFFFFF;--prism-background-color:#282C34"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#FFFFFF;background-color:#282C34"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#FFFFFF"><span class="token plain">llm_generated_response </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token triple-quoted-string string" style="color:#8dc891">&quot;&quot;&quot;Albert Einstein revolutionized physics with his theory of relativity. </span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token triple-quoted-string string" style="color:#8dc891">    He proposed that space and time are interconnected and that the speed of </span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token triple-quoted-string string" style="color:#8dc891">    light is constant in all reference frames. His famous equation E = mc² </span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token triple-quoted-string string" style="color:#8dc891">    showed that mass and energy are equivalent. Einstein&#x27;s work on the </span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token triple-quoted-string string" style="color:#8dc891">    photoelectric effect contributed to the development of quantum theory, </span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token triple-quoted-string string" style="color:#8dc891">    earning him the Nobel Prize in Physics.&quot;&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">expected_output </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token triple-quoted-string string" style="color:#8dc891">&quot;&quot;&quot;Albert Einstein transformed our understanding of the universe with his </span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token triple-quoted-string string" style="color:#8dc891">    groundbreaking theories. His special and general theories of relativity </span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token triple-quoted-string string" style="color:#8dc891">    redefined concepts of space, time, and gravity. Einstein&#x27;s equation E = mc² </span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token triple-quoted-string string" style="color:#8dc891">    revealed the fundamental relationship between mass and energy. His </span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token triple-quoted-string string" style="color:#8dc891">    explanation of the photoelectric effect was crucial to the emergence of </span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token triple-quoted-string string" style="color:#8dc891">    quantum physics, for which he received the Nobel Prize. Throughout his career,</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token triple-quoted-string string" style="color:#8dc891">    Einstein&#x27;s innovative thinking and scientific contributions reshaped the </span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token triple-quoted-string string" style="color:#8dc891">    field of physics.&quot;&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># Calculate Relevance Score</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">relevance_score </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> lm_eval_text</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain">calculate_relevance_score</span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    llm_generated_response</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    expected_output</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    model_name</span><span class="token operator" style="color:#fc929e">=</span><span class="token string" style="color:#8dc891">&quot;gpt-3.5-turbo&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># Print results</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">display</span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain">pd</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain">DataFrame</span><span class="token punctuation" style="color:#657b83">(</span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token string" style="color:#8dc891">&quot;LLM Generated Response&quot;</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> llm_generated_response</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token string" style="color:#8dc891">&quot;Expected Output&quot;</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> expected_output</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token string" style="color:#8dc891">&quot;Relevance Score&quot;</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> relevance_score</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">}</span><span class="token punctuation" style="color:#657b83">)</span><span class="token punctuation" style="color:#657b83">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<img width="1000" alt="relevance" src="https://github.com/lastmile-ai/aiconfig/assets/81494782/66cb897e-8063-4054-a9dd-3bcc9036b029">
<p>The relevance score of 0.94 indicates high alignment between the LLM-generated response and the expected output. Both texts cover Einstein&#x27;s key contributions: the theory of relativity, E = mc², and the photoelectric effect. The score isn&#x27;t perfect, as the LLM response omits mentions of general relativity and Einstein&#x27;s broader impact on physics. However, it adds relevant details about light&#x27;s constant speed. Overall, the high score reflects strong topical relevance and accurate conveyance of Einstein&#x27;s main scientific achievements.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="qa-on-retrieved-data">Q/A on Retrieved Data<a href="#qa-on-retrieved-data" class="hash-link" aria-label="Direct link to Q/A on Retrieved Data" title="Direct link to Q/A on Retrieved Data">​</a></h3>
<p>The Q/A on Retrieved Data evaluator is a binary measure of whether an LLM-generated response answers a user query based on the retrieved context. It aims to evaluate the accuracy and completeness of the answer in relation to the provided information. The Q/A on Retrieved Data score answers: <em>&quot;Does the LLM-generated response correctly and completely answer the user query based on the retrieved context?&quot;</em></p>
<p>Inputs:</p>
<ul>
<li>User&#x27;s question: The input query to the RAG application.</li>
<li>Retrieved context: The context or information retrieved from a vector DB based on the user question</li>
<li>LLM-generated response: The output produced by the LLM using the retrieved context.</li>
</ul>
<p>The Q/A on Retrieved Data evaluator outputs a binary score. A score of 1 indicates the answer is correct and complete based on the retrieved context. A score of 0 means the answer is incorrect, incomplete, or includes information not present in the retrieved context.</p>
<p><strong>Example Code Snippet</strong></p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#FFFFFF;--prism-background-color:#282C34"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#FFFFFF;background-color:#282C34"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#FFFFFF"><span class="token plain">user_query </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token string" style="color:#8dc891">&quot;What did Einstein win the Nobel Prize for?&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">retrieved_context </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token triple-quoted-string string" style="color:#8dc891">&quot;&quot;&quot;Albert Einstein received the Nobel Prize in Physics in 1921. However, </span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token triple-quoted-string string" style="color:#8dc891">    contrary to popular belief, he didn&#x27;t receive it for his theories of relativity. </span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token triple-quoted-string string" style="color:#8dc891">    Einstein was awarded the Nobel Prize &#x27;for his services to Theoretical Physics,</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token triple-quoted-string string" style="color:#8dc891">    and especially for his discovery of the law of the photoelectric effect&#x27;.&quot;&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">llm_generated_response </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token triple-quoted-string string" style="color:#8dc891">&quot;&quot;&quot;Einstein won the Nobel Prize in Physics in 1921 for his discovery</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token triple-quoted-string string" style="color:#8dc891">    of the law of the photoelectric effect, not for his theories of relativity as</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token triple-quoted-string string" style="color:#8dc891">     is often mistakenly believed.&quot;&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># Calculate Q/A on Retrieved Data Score</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">qa_score </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> lm_eval_text</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain">calculate_qa_score</span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    llm_generated_response</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    retrieved_context</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    user_query</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    model_name</span><span class="token operator" style="color:#fc929e">=</span><span class="token string" style="color:#8dc891">&quot;gpt-3.5-turbo&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># Print results</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">display</span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain">pd</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain">DataFrame</span><span class="token punctuation" style="color:#657b83">(</span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token string" style="color:#8dc891">&quot;User Query&quot;</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> user_query</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token string" style="color:#8dc891">&quot;Retrieved Context&quot;</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> retrieved_context</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token string" style="color:#8dc891">&quot;LLM Generated Response&quot;</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> llm_generated_response</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token string" style="color:#8dc891">&quot;Q/A on Retrieved Data Score&quot;</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> qa_score</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">}</span><span class="token punctuation" style="color:#657b83">)</span><span class="token punctuation" style="color:#657b83">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<img width="1000" alt="Screen Shot 2024-07-05 at 3 27 59 PM" src="https://github.com/lastmile-ai/aiconfig/assets/81494782/b0a15efb-d6c7-4600-9216-e85f992d4b57">
<p>The Q/A on Retrieved Data score of 1 indicates the LLM response fully and accurately answers the query based on the retrieved context. It correctly identifies Einstein&#x27;s Nobel Prize reason and year, notes it wasn&#x27;t for relativity, and doesn&#x27;t add information beyond the context, demonstrating high fidelity to the provided data.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="output-quality-evaluators">Output Quality Evaluators<a href="#output-quality-evaluators" class="hash-link" aria-label="Direct link to Output Quality Evaluators" title="Direct link to Output Quality Evaluators">​</a></h2>
<p>Output Quality Evaluators assess how closely LLM-generated text matches reference text or meets specific criteria. These metrics include Semantic Similarity for meaning comparison, Exact Match for perfect string matching, BLEU for precision-based similarity, and ROUGE for recall-oriented summary evaluation.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="semantic-similarity">Semantic Similarity<a href="#semantic-similarity" class="hash-link" aria-label="Direct link to Semantic Similarity" title="Direct link to Semantic Similarity">​</a></h3>
<p>The Semantic Similarity evaluator measures how similar two strings are, regardless of their actual meaning. It assesses the textual closeness of an LLM-generated response to a reference text. The Semantic Similarity evaluator answers: <em>&quot;How textually similar is the LLM-generated response to the reference text, irrespective of their meaning?&quot;</em></p>
<p>Inputs:</p>
<ul>
<li>LLM-generated response: The response produced by the LLM.</li>
<li>Reference text: The text to compare against.</li>
</ul>
<p>The Semantic Similarity evaluator outputs a score ranging from 0 to 1. Higher scores indicate greater similarity between the strings, while lower scores suggest more differences.</p>
<p><strong>PLEASE NOTE:</strong> This metric can lead to misinterpretations if used in isolation. For example, the strings &quot;The sky is blue&quot; and &quot;The sky is NOT blue&quot; would score high in semantic similarity, despite having opposite meanings. Therefore, this metric should be used in conjunction with other metrics for a more comprehensive evaluation like hallucination detection (faithfulness).</p>
<p><strong>Example Code Snippet</strong></p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#FFFFFF;--prism-background-color:#282C34"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#FFFFFF;background-color:#282C34"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#FFFFFF"><span class="token plain">llm_generated_response </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token triple-quoted-string string" style="color:#8dc891">&quot;&quot;&quot;Einstein&#x27;s theory of relativity was widely accepted by </span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token triple-quoted-string string" style="color:#8dc891">    the scientific community.&quot;&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">reference_text </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token triple-quoted-string string" style="color:#8dc891">&quot;&quot;&quot;Einstein&#x27;s theory of relativity was not widely accepted by </span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token triple-quoted-string string" style="color:#8dc891">    the scientific community.&quot;&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># Calculate Semantic Similarity Score</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">semantic_similarity_score </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> lm_eval_text</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain">calculate_custom_llm_metric_example_semantic_similarity</span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    llm_generated_response</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    reference_text</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    model_name</span><span class="token operator" style="color:#fc929e">=</span><span class="token string" style="color:#8dc891">&quot;gpt-3.5-turbo&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># Print results</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">display</span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain">pd</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain">DataFrame</span><span class="token punctuation" style="color:#657b83">(</span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token string" style="color:#8dc891">&quot;LLM Generated Response&quot;</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> llm_generated_response</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token string" style="color:#8dc891">&quot;Reference Text&quot;</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> reference_text</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token string" style="color:#8dc891">&quot;Semantic Similarity Score&quot;</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> semantic_similarity_score</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">}</span><span class="token punctuation" style="color:#657b83">)</span><span class="token punctuation" style="color:#657b83">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<img width="1000" alt="Screen Shot 2024-07-05 at 4 47 32 PM" src="https://github.com/lastmile-ai/aiconfig/assets/81494782/4cc5638f-88b2-4dc7-8e4a-be584df1383e">
<p>The Semantic Similarity Score of 0.80 shows high textual similarity despite opposite meanings. The strings differ only by &quot;not&quot;, reversing the claim about Einstein&#x27;s theory reception. This high score highlights a key limitation: the metric doesn&#x27;t detect meaning differences or contradictions. It emphasizes the need to use this metric alongside others that can assess semantic accuracy and factual correctness.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="exact-match">Exact Match<a href="#exact-match" class="hash-link" aria-label="Direct link to Exact Match" title="Direct link to Exact Match">​</a></h3>
<p>The Exact Match evaluator assesses whether an LLM-generated response is identical to a reference text. It provides a binary score indicating perfect string matching. The Exact Match Score answers: <em>&quot;Is the LLM-generated response exactly the same as the reference text?&quot;</em></p>
<p>Inputs:</p>
<ul>
<li>LLM-generated response: The response produced by the LLM.</li>
<li>Reference text: The text to compare against.</li>
</ul>
<p>The Exact Match evaluator outputs a binary score: 1 if the strings match exactly, and 0 if there&#x27;s any difference. This metric is particularly useful when the LLM&#x27;s temperature is set to 0, ensuring consistent outputs for identical inputs.</p>
<p><strong>Example Code Snippet</strong></p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#FFFFFF;--prism-background-color:#282C34"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#FFFFFF;background-color:#282C34"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#FFFFFF"><span class="token plain">llm_generated_response </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token string" style="color:#8dc891">&quot;E = mc^2 is Einstein&#x27;s famous equation relating energy and mass.&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">reference_text </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token string" style="color:#8dc891">&quot;E = mc^2 is Einstein&#x27;s famous equation relating energy and mass.&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># Calculate Exact Match Score</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">exact_match_score </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> lm_eval_text</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain">calculate_exact_match_score</span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    llm_generated_response</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    reference_text</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># Print results</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">display</span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain">pd</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain">DataFrame</span><span class="token punctuation" style="color:#657b83">(</span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token string" style="color:#8dc891">&quot;LLM Generated Response&quot;</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> llm_generated_response</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token string" style="color:#8dc891">&quot;Reference Text&quot;</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> reference_text</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token string" style="color:#8dc891">&quot;Exact Match Score&quot;</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> exact_match_score</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">}</span><span class="token punctuation" style="color:#657b83">)</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<img width="820" alt="Screen Shot 2024-07-05 at 4 55 48 PM" src="https://github.com/lastmile-ai/aiconfig/assets/81494782/0680fb06-0271-4683-ba22-2818b9196712">
<p>The Exact Match Score of 1 indicates the LLM-generated response perfectly matches the reference text. Both strings identically describe Einstein&#x27;s famous equation, demonstrating the metric&#x27;s ability to detect perfect matches. This score is useful for verifying precise reproduction of expected outputs.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="bleu">BLEU<a href="#bleu" class="hash-link" aria-label="Direct link to BLEU" title="Direct link to BLEU">​</a></h3>
<p>The BLEU (Bilingual Evaluation Understudy) score measures how similar a machine-generated text is to a reference text. It does this by comparing overlapping words and phrases, including sequences of words called n-grams. The BLEU Score answers: <em>&quot;How closely does the LLM-generated text match the reference text in terms of word and phrase usage?&quot;</em> <a href="https://towardsdatascience.com/foundations-of-nlp-explained-bleu-score-and-wer-metrics-1a5ba06d812b" target="_blank" rel="noopener noreferrer">Read more about BLEU.</a></p>
<p>Inputs:</p>
<ul>
<li>LLM-generated text: The text produced by the LLM.</li>
<li>Reference text: The text to compare against.</li>
</ul>
<p>BLEU scores ranges from 0 to 1. Higher scores mean the generated text uses more of the same words and phrases as the reference text.</p>
<p><strong>Example Code Snippet</strong></p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#FFFFFF;--prism-background-color:#282C34"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#FFFFFF;background-color:#282C34"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#FFFFFF"><span class="token plain">llm_generated_text </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token triple-quoted-string string" style="color:#8dc891">&quot;&quot;&quot;Einstein developed the theory of relativity, which changed </span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token triple-quoted-string string" style="color:#8dc891">    our understanding of space and time.&quot;&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">reference_text </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token triple-quoted-string string" style="color:#8dc891">&quot;&quot;&quot;Einstein created the theory of relativity that revolutionized </span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token triple-quoted-string string" style="color:#8dc891">    our view of space and time.&quot;&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># Calculate BLEU Score</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">bleu_score </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> lm_eval_text</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain">calculate_bleu_score</span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    llm_generated_text</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    reference_text</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># Print results</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">display</span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain">pd</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain">DataFrame</span><span class="token punctuation" style="color:#657b83">(</span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token string" style="color:#8dc891">&quot;LLM Generated Text&quot;</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> llm_generated_text</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token string" style="color:#8dc891">&quot;Reference Text&quot;</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> reference_text</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token string" style="color:#8dc891">&quot;BLEU Score&quot;</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> bleu_score</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">}</span><span class="token punctuation" style="color:#657b83">)</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<img width="725" alt="Screen Shot 2024-07-05 at 5 04 01 PM" src="https://github.com/lastmile-ai/aiconfig/assets/81494782/2f6a0dae-4bde-431c-aaac-2d0716ca5699">
<p>The BLEU Score of 0.4 shows moderate similarity between the texts. Both convey the core idea about Einstein&#x27;s theory of relativity, but differ in specific wording (e.g., &quot;developed&quot; vs. &quot;created&quot;). This score reflects BLEU&#x27;s sensitivity to exact word matches and order, highlighting why it should be used alongside other metrics for comprehensive evaluation.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="rouge">ROUGE<a href="#rouge" class="hash-link" aria-label="Direct link to ROUGE" title="Direct link to ROUGE">​</a></h3>
<p>The ROUGE (Recall-Oriented Understudy for Gisting Evaluation) score measures how well a machine-generated summary captures the content of a reference summary. Unlike BLEU, which focuses on precision, ROUGE emphasizes recall, assessing how much of the reference content is present in the generated text. The ROUGE Score answers: <em>&quot;How well does the LLM-generated summary cover the key information from the reference summary?&quot;</em> <a href="https://medium.com/nlplanet/two-minutes-nlp-learn-the-rouge-metric-by-examples-f179cc285499" target="_blank" rel="noopener noreferrer">Read more about ROUGE.</a></p>
<p>Inputs:</p>
<ul>
<li>LLM-generated summary: The summary produced by the LLM.</li>
<li>Reference summary: The summary to compare against.</li>
</ul>
<p>ROUGE score ranges from 0 to 1. Higher scores indicate better coverage of the reference summary&#x27;s content in the generated summary.</p>
<p><strong>Example Code Snippet</strong></p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#FFFFFF;--prism-background-color:#282C34"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#FFFFFF;background-color:#282C34"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#FFFFFF"><span class="token plain">llm_generated_summary </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token triple-quoted-string string" style="color:#8dc891">&quot;&quot;&quot;Einstein&#x27;s theory of relativity revolutionized physics by unifying space and time. </span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token triple-quoted-string string" style="color:#8dc891">    It introduced the concept of spacetime and showed that massive objects can warp it. </span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token triple-quoted-string string" style="color:#8dc891">    The theory also led to the famous equation E=mc², relating mass and energy.&quot;&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">reference_summary </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token triple-quoted-string string" style="color:#8dc891">&quot;&quot;&quot;Einstein&#x27;s theory of relativity transformed our understanding of the universe. </span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token triple-quoted-string string" style="color:#8dc891">    It combined space and time into a single continuum called spacetime, which can be </span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token triple-quoted-string string" style="color:#8dc891">    distorted by mass and energy. The theory&#x27;s most famous outcome is the equation E=mc², </span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token triple-quoted-string string" style="color:#8dc891">    demonstrating the equivalence of mass and energy.&quot;&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># Calculate ROUGE Score</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">rouge_score </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> lm_eval_text</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain">calculate_rouge1_score</span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    llm_generated_summary</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    reference_summary</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># Print results</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">display</span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain">pd</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain">DataFrame</span><span class="token punctuation" style="color:#657b83">(</span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token string" style="color:#8dc891">&quot;LLM Generated Summary&quot;</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> llm_generated_summary</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token string" style="color:#8dc891">&quot;Reference Summary&quot;</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> reference_summary</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token string" style="color:#8dc891">&quot;ROUGE Score&quot;</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> rouge_score</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">}</span><span class="token punctuation" style="color:#657b83">)</span><span class="token punctuation" style="color:#657b83">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<img width="730" alt="Screen Shot 2024-07-05 at 5 10 21 PM" src="https://github.com/lastmile-ai/aiconfig/assets/81494782/32052c1a-c904-49d6-917d-c49fbc44d3f2">
<p>The ROUGE Score of 0.56 indicates moderate content overlap between the generated and reference summaries. Both capture key aspects of Einstein&#x27;s theory of relativity, including the unification of space and time, spacetime concept, and the E=mc² equation. However, the score suggests some differences in coverage or phrasing. This demonstrates how ROUGE evaluates summary quality based on shared content, balancing similarities and variations in expression.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="safety-evaluators">Safety Evaluators<a href="#safety-evaluators" class="hash-link" aria-label="Direct link to Safety Evaluators" title="Direct link to Safety Evaluators">​</a></h2>
<p>Safety Evaluators assess the appropriateness and potential harm of LLM-generated content.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="toxicity">Toxicity<a href="#toxicity" class="hash-link" aria-label="Direct link to Toxicity" title="Direct link to Toxicity">​</a></h3>
<p>The Toxicity evaluator is a binary measure that assesses whether an LLM-generated response contains toxic content. It aims to identify harmful, offensive, or inappropriate elements in the generated text. The Toxicity Score answers: <em>&quot;Does the LLM-generated response contain any form of toxic content?&quot;</em></p>
<p>Input:</p>
<ul>
<li>LLM-generated response: The text produced by the LLM to be evaluated for toxicity.</li>
</ul>
<p>The Toxicity evaluator outputs a binary score where a score of 1 indicates the response contains toxic content, while a score of 0 means the response is free from toxicity.</p>
<p><strong>Example Code Snippet</strong></p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#FFFFFF;--prism-background-color:#282C34"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#FFFFFF;background-color:#282C34"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#FFFFFF"><span class="token plain">llm_generated_responses </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token string" style="color:#8dc891">&quot;Some people don&#x27;t like pineapple on pizza and that&#x27;s okay.&quot;</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token string" style="color:#8dc891">&quot;Anyone who puts pineapple on pizza is disgusting!&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># Calculate Toxicity Score</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">toxicity_scores </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> lm_eval_text</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain">calculate_toxicity_score</span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    llm_generated_responses</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    model_name</span><span class="token operator" style="color:#fc929e">=</span><span class="token string" style="color:#8dc891">&quot;gpt-3.5-turbo&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># Print results</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">display</span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain">pd</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain">DataFrame</span><span class="token punctuation" style="color:#657b83">(</span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token string" style="color:#8dc891">&quot;LLM Generated Response&quot;</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> llm_generated_responses</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token string" style="color:#8dc891">&quot;Toxicity Score&quot;</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> toxicity_scores</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">}</span><span class="token punctuation" style="color:#657b83">)</span><span class="token punctuation" style="color:#657b83">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<img width="500" alt="Screen Shot 2024-07-05 at 4 35 53 PM" src="https://github.com/lastmile-ai/aiconfig/assets/81494782/c844abde-d75f-49f1-b1d5-bfd1e9b5cd88">
<p>The Toxicity Scores accurately identify the presence of toxic content. The first response scores 0, expressing a personal preference respectfully. The second scores 1 due to its demeaning language. This demonstrates the evaluator&#x27;s ability to distinguish between respectful and toxic expressions in everyday discussions.</p></div></div></div><div class="row"><div class="col col--12"></div></div></article><div class="row"><div class="col col--12"><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/active-learning"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Active Learning</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/deployment"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Deployment Options</div></a></nav></div></div></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#hallucination-detection-faithfulness" class="table-of-contents__link toc-highlight">Hallucination Detection (Faithfulness)</a></li><li><a href="#summarization" class="table-of-contents__link toc-highlight">Summarization</a></li><li><a href="#relevance" class="table-of-contents__link toc-highlight">Relevance</a></li><li><a href="#qa-on-retrieved-data" class="table-of-contents__link toc-highlight">Q/A on Retrieved Data</a></li><li><a href="#output-quality-evaluators" class="table-of-contents__link toc-highlight">Output Quality Evaluators</a><ul><li><a href="#semantic-similarity" class="table-of-contents__link toc-highlight">Semantic Similarity</a></li><li><a href="#exact-match" class="table-of-contents__link toc-highlight">Exact Match</a></li><li><a href="#bleu" class="table-of-contents__link toc-highlight">BLEU</a></li><li><a href="#rouge" class="table-of-contents__link toc-highlight">ROUGE</a></li></ul></li><li><a href="#safety-evaluators" class="table-of-contents__link toc-highlight">Safety Evaluators</a><ul><li><a href="#toxicity" class="table-of-contents__link toc-highlight">Toxicity</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 LastMile AI, Inc.</div></div></div></footer></div>
</body>
</html>